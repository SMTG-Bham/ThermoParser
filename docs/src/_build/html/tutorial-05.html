<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tutorial-05: Helper Functions &mdash; ThermoParser 2.0.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Tutorial-06: Package Customisation" href="tutorial-06.html" />
    <link rel="prev" title="Tutorial-04: Layered Plots" href="tutorial-04.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="contents.html" class="icon icon-home"> ThermoParser
            <img src="_static/tp-logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="gallery.html">Gallery</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="tutorials.html">Tutorials</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="tutorial-00.html"> Tutorial-00: CLI Fundamentals</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial-01.html"> Tutorial-01: Python Foundations</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial-02.html"> Tutorial-02: Individual Customisation</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial-03.html"> Tutorial-03: Compound Axes</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial-04.html"> Tutorial-04: Layered Plots</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#"> Tutorial-05: Helper Functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#axes-line-20">Axes (line 20)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#resolve-lines-36-and-41">Resolve (lines 36 and 41)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#locators-ticks-and-labels-lines-45-49">Locators, Ticks and Labels (lines 45-49)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#legends-lines-51-54">Legends (lines 51-54)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tutorial-06.html"> Tutorial-06: Package Customaisation</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial-0X.html"> Tutorial-0X: VASP Assists</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#command-line-usage">Command Line Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#python-usage">Python Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#contributing">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#testing">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#contributors">Contributors</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#license">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#requirements">Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">Python Package</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="contents.html">ThermoParser</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="contents.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="tutorials.html">Tutorials</a> &raquo;</li>
      <li>Tutorial-05: Helper Functions</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/tutorial-05.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="tutorial-05-helper-functions">
<h1>Tutorial-05: Helper Functions<a class="headerlink" href="#tutorial-05-helper-functions" title="Permalink to this headline"></a></h1>
<img alt="Electrical conductivity, Seebeck coefficient and lattice thermal conductivity of BaSnO\ :sub:`3`" src="_images/tutorial-05.png" />
<p>ThermoParser contains a number of helper functions that may be useful
even when not using the core functionality. We will cover several of
these here, however this particular example is also plottable via the
CLI:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tp</span> <span class="n">plot</span> <span class="n">transport</span> <span class="o">../</span><span class="n">data</span><span class="o">/</span><span class="n">basno3</span><span class="o">/</span><span class="n">transport_75x75x75</span><span class="o">.</span><span class="n">json</span> <span class="o">-</span><span class="n">k</span> <span class="o">../</span><span class="n">data</span><span class="o">/</span><span class="n">basno3</span><span class="o">/</span><span class="n">kappa</span><span class="o">-</span><span class="n">m363636</span><span class="o">.</span><span class="n">hdf5</span> <span class="o">-</span><span class="n">q</span> <span class="n">conductivity</span> <span class="o">-</span><span class="n">q</span> <span class="n">seebeck</span> <span class="o">-</span><span class="n">q</span> <span class="n">lattice_thermal_conductivity</span> <span class="o">-</span><span class="n">n</span> <span class="mf">1e18</span> <span class="o">-</span><span class="n">n</span> <span class="mf">1e19</span> <span class="o">-</span><span class="n">n</span> <span class="mf">1e20</span> <span class="o">-</span><span class="n">n</span> <span class="mf">1e21</span> <span class="o">--</span><span class="n">tmin</span> <span class="mi">0</span> <span class="o">--</span><span class="n">location</span> <span class="mi">3</span>
</pre></div>
</div>
<p>The full script is long and mostly irrelevant, but can be found <a class="reference external" href="https://github.com/smtg-bham/ThermoParser/blob/master/examples/05-helper-functions/tutorial-05.py">here</a>.</p>
<div class="section" id="axes-line-20">
<h2>Axes (line 20)<a class="headerlink" href="#axes-line-20" title="Permalink to this headline"></a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s1">&#39;tp&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>ThermoParser comes with two <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> styles, <code class="docutils literal notranslate"><span class="pre">tp</span></code> and
<code class="docutils literal notranslate"><span class="pre">tp-large</span></code>, for small and large axes respectively, which are
accessible any time using <code class="docutils literal notranslate"><span class="pre">plt.style.use</span></code>.</p>
</div>
<div class="section" id="resolve-lines-36-and-41">
<h2>Resolve (lines 36 and 41)<a class="headerlink" href="#resolve-lines-36-and-41" title="Permalink to this headline"></a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">tp</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">utilities</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">adata</span><span class="p">,</span> <span class="n">q</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="n">direction</span><span class="p">,</span> <span class="n">doping</span><span class="o">=</span><span class="n">d</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">tp.data.utilities.resolve</span></code> resolves a data array by dependent
properties. As arguments, it takes a data dictionary, an array of the
names of the quantities to be resolved, and the dependent variable
values. This can be used easily with data loaded through ThermoParser,
but with some minor alterations, almost any data can be resolved.</p>
<p>Most ThermoParser data dictionaries come with a <code class="docutils literal notranslate"><span class="pre">meta</span></code>
subdictionary, which contains metadata including units, array shapes
and data source. For <code class="docutils literal notranslate"><span class="pre">resolve</span></code> to work, it needs a <code class="docutils literal notranslate"><span class="pre">dimensions</span></code>
subdictionary in <code class="docutils literal notranslate"><span class="pre">meta</span></code>, which should contain an array with the same
name as the variable to be resolved. This should contain the names of
the dependent variables in the order of the data dimensions, except
directions, which can be either 3 or 6. For example,
<code class="docutils literal notranslate"><span class="pre">adata['meta']['dimensions']['seebeck']</span> <span class="pre">==</span> <span class="pre">['temperature',</span> <span class="pre">'doping',</span> <span class="pre">3,</span> <span class="pre">3]</span></code>.
The direction is represented by a 3x3 array. The other thing that is
needed is for the dependent variables to also be in the dictionary.
ThermoParser automatically loads dependent variables.</p>
<p><code class="docutils literal notranslate"><span class="pre">resolve</span></code> does not interpolate, but rather rounds to the nearest data
point, which it saves to <code class="docutils literal notranslate"><span class="pre">['meta']['variable_name']</span></code>, so you can be
sure what the data is. This is also useful in setting legend labels, as
on line 38.</p>
</div>
<div class="section" id="locators-ticks-and-labels-lines-45-49">
<h2>Locators, Ticks and Labels (lines 45-49)<a class="headerlink" href="#locators-ticks-and-labels-lines-45-49" title="Permalink to this headline"></a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">axlabels</span> <span class="o">=</span> <span class="n">tp</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">labels</span><span class="p">()</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">q</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">([</span><span class="o">*</span><span class="n">quantities</span><span class="p">,</span> <span class="n">q</span><span class="p">]):</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="n">axlabels</span><span class="p">[</span><span class="s1">&#39;temperature&#39;</span><span class="p">])</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">axlabels</span><span class="p">[</span><span class="n">q</span><span class="p">])</span>
    <span class="n">tp</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">utilities</span><span class="o">.</span><span class="n">set_locators</span><span class="p">(</span><span class="n">ax</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;linear&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">scale</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
</pre></div>
</div>
<p>There are several functions to aid in formatting axes.
<code class="docutils literal notranslate"><span class="pre">tp.settings.labels</span></code>, and its variations <code class="docutils literal notranslate"><span class="pre">large_</span></code>, <code class="docutils literal notranslate"><span class="pre">long_</span></code>,
<code class="docutils literal notranslate"><span class="pre">medium_</span></code> and <code class="docutils literal notranslate"><span class="pre">short_labels</span></code> return a dictionary of axes labels
(more on these in <code class="docutils literal notranslate"><span class="pre">06-package-customisation</span></code>).
<code class="docutils literal notranslate"><span class="pre">tp.plot.utilities.set_locators</span></code> sets the locators, if you provide a
set of axes and set <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code> to either <code class="docutils literal notranslate"><span class="pre">'linear'</span></code> or <code class="docutils literal notranslate"><span class="pre">'log'</span></code>
as appropriate.</p>
</div>
<div class="section" id="legends-lines-51-54">
<h2>Legends (lines 51-54)<a class="headerlink" href="#legends-lines-51-54" title="Permalink to this headline"></a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">handles</span><span class="p">,</span> <span class="n">labels</span> <span class="o">=</span> <span class="n">tp</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">legend</span><span class="o">.</span><span class="n">consolidate</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;best&#39;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">axlabels</span><span class="p">[</span><span class="s1">&#39;doping&#39;</span><span class="p">],</span> <span class="n">handles</span><span class="o">=</span><span class="n">handles</span><span class="p">,</span>
             <span class="n">labels</span><span class="o">=</span><span class="n">labels</span><span class="p">)</span>
<span class="n">tp</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">legend</span><span class="o">.</span><span class="n">alphabetise</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">preset</span><span class="o">=</span><span class="s1">&#39;roman&#39;</span><span class="p">,</span> <span class="n">suffix</span><span class="o">=</span><span class="s1">&#39;)&#39;</span><span class="p">,</span> <span class="n">x</span><span class="o">=-</span><span class="mf">0.12</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">tp.axes.legend.consolidate</span></code> consolidates the legends of a list of
axes into one, ensuring no duplicates, and returns the handles and
labels, which can then be passed to <code class="docutils literal notranslate"><span class="pre">ax.legend</span></code>.</p>
<p>Not exactly a legend, but <code class="docutils literal notranslate"><span class="pre">tp.axes.legend.alphabetise</span></code> adds labels
to the axes. <code class="docutils literal notranslate"><span class="pre">preset``s</span> <span class="pre">are</span> <span class="pre">available</span> <span class="pre">for</span> <span class="pre">``latin</span></code> and <code class="docutils literal notranslate"><span class="pre">greek</span></code>
alphabetisation, and <code class="docutils literal notranslate"><span class="pre">arabic</span></code> and <code class="docutils literal notranslate"><span class="pre">roman</span></code> enumeration.
Capitalising the first letter (e.g. <code class="docutils literal notranslate"><span class="pre">Greek</span></code>) will capitalise the
labels where applicable. Fully custom labels can also be specified
using the <code class="docutils literal notranslate"><span class="pre">labels</span></code> argument, along with <code class="docutils literal notranslate"><span class="pre">prefix</span></code>es and
<code class="docutils literal notranslate"><span class="pre">suffix</span></code>es, and the position can be modified with <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code>.</p>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="tutorial-04.html" class="btn btn-neutral float-left" title="Tutorial-04: Layered Plots" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="tutorial-06.html" class="btn btn-neutral float-right" title="Tutorial-06: Package Customisation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Scanlon Materials Theory Group.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>